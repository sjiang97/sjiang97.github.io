<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Optimal Energy Production | Shaokang&#39;s Blog</title><meta name="keywords" content="Optimize energy, expectation, Blog"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.6.3/css/all.min.css"><link href="/css/table.css" type="text/css" rel="stylesheet" media="screen,projection"><link href="https://cdn.bootcss.com/KaTeX/0.7.1/katex.min.css" rel="stylesheet"><link rel="stylesheet" href="/style.css"><script>function setLoadingBarProgress(e){document.getElementById("loading-bar").style.width=e+"%"}</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script></head><body><div class="cover-wrapper"><cover class="cover post half"><h1 class="title">Shaokang's Blog</h1><div class="m_search"><form name="searchform" class="form u-search-form"><input type="text" class="input u-search-input" placeholder="search"> <i class="icon fas fa-search fa-fw"></i></form></div><div class="menu navgation"><ul class="h-list"><li><a class="nav home" href="/" id="home"><i class="fas fa-rss fa-fw"></i>&nbsp;Recent</a></li><li><a class="nav home" href="/projects/" id="projects"><i class="fas fa-code-branch fa-fw"></i>&nbsp;Projects</a></li><li><a class="nav home" href="/about/" rel="nofollow" id="about"><i class="fas fa-info-circle fa-fw"></i>&nbsp;About</a></li></ul></div></cover><header class="l_header material"><div id="loading-bar-wrapper"><div id="loading-bar" class="material"></div></div><div class="wrapper"><div class="nav-main container container--flex"><a class="logo flat-box" href="/">Shaokang's Blog</a><div class="menu navgation"><ul class="h-list"><li><a class="nav flat-box" href="/" id="home"><i class="fas fa-grin fa-fw"></i>&nbsp;Recent</a></li><li><a class="nav flat-box" href="/categories/" rel="nofollow" id="categories"><i class="fas fa-folder-open fa-fw"></i>&nbsp;Category</a></li><li><a class="nav flat-box" href="/tags/" rel="nofollow" id="tags"><i class="fas fa-hashtag fa-fw"></i>&nbsp;Tags</a></li><li><a class="nav flat-box" href="/archives/" rel="nofollow" id="archives"><i class="fas fa-archive fa-fw"></i>&nbsp;Archive</a></li></ul></div><div class="m_search"><form name="searchform" class="form u-search-form"><input type="text" class="input u-search-input" placeholder="Search"> <i class="icon fas fa-search fa-fw"></i></form></div><ul class="switcher h-list"><li class="s-search"><a class="fas fa-search fa-fw" href="javascript:void(0)"></a></li><li class="s-menu"><a class="fas fa-bars fa-fw" href="javascript:void(0)"></a></li></ul></div><div class="nav-sub container container--flex"><a class="logo flat-box"></a><ul class="switcher h-list"><li class="s-comment"><a class="flat-btn fas fa-comments fa-fw" href="javascript:void(0)"></a></li><li class="s-toc"><a class="flat-btn fas fa-list fa-fw" href="javascript:void(0)"></a></li></ul></div></div></header><aside class="menu-phone"><header><nav class="menu navgation"><ul><li><a class="nav flat-box" href="/" id="home"><i class="fas fa-clock fa-fw"></i>&nbsp;Recent</a></li><li><a class="nav flat-box" href="/archives/" rel="nofollow" id="archives"><i class="fas fa-archive fa-fw"></i>&nbsp;Archive</a></li><li><a class="nav flat-box" href="/projects/" id="projects"><i class="fas fa-code-branch fa-fw"></i>&nbsp;Project</a></li><li><a class="nav flat-box" href="/categories/" rel="nofollow" id="categories"><i class="fas fa-folder-open fa-fw"></i>&nbsp;Category</a></li><li><a class="nav flat-box" href="/tags/" rel="nofollow" id="tags"><i class="fas fa-hashtag fa-fw"></i>&nbsp;Tags</a></li><li><a class="nav flat-box" href="/about/" rel="nofollow" id="about"><i class="fas fa-info-circle fa-fw"></i>&nbsp;About</a></li></ul></nav></header></aside><script>setLoadingBarProgress(40)</script></div><div class="l_body"><div class="body-wrapper"><div class="l_main"><article id="post" class="post white-box article-type-post" itemscope itemprop="blogPost"><section class="meta"><div class="meta" id="header-meta"><h1 class="title"><a href="/2020/Optimal-Energy-Production/">Optimal Energy Production</a></h1><div class="new-meta-box"><div class="new-meta-item author"><a href="https://shaokang.ga" rel="nofollow"><i class="fas fa-user" aria-hidden="true"></i><p>Shaokang Jiang</p></a></div><div class="new-meta-item date"><a class="notlink"><i class="fas fa-calendar-alt" aria-hidden="true"></i><p>05/16/2020</p></a></div><div class="new-meta-item category"><a href="/categories/optimization/" rel="nofollow"><i class="fas fa-folder-open" aria-hidden="true"></i><p>optimization</p></a></div></div><hr></div></section><section class="article typo"><div class="article-entry" itemprop="articleBody"><p>A simple limitation is too less sometime. If we are using the fixed threshold, then we could simply let threshold to be the time that consumption is equal to usage. And we are not able to handle the battery capacity as well. This might not meet the real case. In the real case, equipment will use large amount of energy when they start. So the model should be able to predict. Thought wind does change everyday, but it is still some kind of predictable. So, we could train a model from the history data and then predict the wind speed in the future, like one year. We could use <a href="https://www.tensorflow.org/js/tutorials/training/linear_regression" target="_blank" rel="noopener">TensorFlow.js</a> for training. Then Solve an optimization problem to see what would be the best time to start the engine and what would be the best time to stop the engine. Or solving an optimization problem to find the threshold to turn on or off the equipment would also better than a simple one.</p><a id="more"></a><h2 id="Normal-Count-Model"><a href="#Normal-Count-Model" class="headerlink" title="Normal Count Model"></a>Normal Count Model</h2><h3 id="Define-variables"><a href="#Define-variables" class="headerlink" title="Define variables"></a>Define variables</h3><p>n : number of days</p><p>c : the normal energy consumption per unit time</p><p>S = {0,1}$^n$, the status code to identify if we need to turn on the machine in this day/unit time.</p><p>C = {0,1,2}$^n$, the counter to count and analyze the normal energy consumption per day/unit time. 2 stand for the unit time that this machine needs to be turned on(as more energy needs to be consumed in the turning on process). 1 identify as daily normal consumption. 0 identify this machine is turned off.</p><p>W = $\mathbf{R}^n$, the energy produced per day/unit time</p><h3 id="Optimization-Model"><a href="#Optimization-Model" class="headerlink" title="Optimization Model"></a>Optimization Model</h3><script type="math/tex;mode=display">\begin{equation}
\begin{split}
&\text{Maximize } & \sum_{i\in n}W_iS_i-c\sum_{i\in n}C_iS_i\\
&\text{Subject to } & C_i=S_i-S_{i-1}+1 \ \forall i\in \{2,\cdots,n\}\\
& & 0 \le C_i \le 2 \ \forall i\in \{1,\cdots,n\}\\
& & 0 \le S_i \le 1 \ \forall i\in \{1,\cdots,n\}\\
\end{split}
\end{equation}</script><p>Use MIP to solve it</p><h3 id="Sample-data"><a href="#Sample-data" class="headerlink" title="Sample data"></a>Sample data</h3><p>Sample data should be in csv format, each column contains different information. Only wind data is represented in the section below</p><p>u is the x component of wind, v is the y component of the wind. Final wind speed is calculated by using $ws = \sqrt{u^2+v^2}$</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Time,u,v</span><br><span class="line">0.2,12,15</span><br><span class="line">0.3,16,12</span><br><span class="line">0.5,12,16</span><br></pre></td></tr></table></figure><p>If we need to make this simpler or we are not able to collect related data for each type of energy, we could also use data in the below format:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Time,var</span><br><span class="line">0.2,12</span><br><span class="line">0.3,16</span><br><span class="line">0.5,12</span><br></pre></td></tr></table></figure><p><code>var</code> is the input energy or data used to calculate. Like we are able to calculate the final energy based on this result in some way, e.g. wind speed.</p><h3 id="Possible-GAMS-code"><a href="#Possible-GAMS-code" class="headerlink" title="Possible GAMS code"></a>Possible GAMS code</h3><h3 id="Interpret-to-Js"><a href="#Interpret-to-Js" class="headerlink" title="Interpret to Js"></a>Interpret to Js</h3><h3 id="Analyze"><a href="#Analyze" class="headerlink" title="Analyze"></a>Analyze</h3><h4 id="Pros"><a href="#Pros" class="headerlink" title="Pros"></a>Pros</h4><ul><li>Considered the immediate on will consume much more energy.</li><li>model could be extended to handle all power source in this single model</li></ul><h4 id="Cons"><a href="#Cons" class="headerlink" title="Cons"></a>Cons</h4><ul><li>wind is not possible to be predicted, so turning on and off has less significance as the situation in the next year might be different.</li></ul><h2 id="Expected-Count-Model"><a href="#Expected-Count-Model" class="headerlink" title="Expected Count Model"></a>Expected Count Model</h2><p>Because the wind is hard to predict, especially in some unstable situation. And battery could only store a limited amount of energy. Using statistic data might be a better way to calculate. We could calculate the expectation of total energy and find a threshold for each type of energy to measure maximize possible energy production instead of in a specific day.</p><p>In this setting, we only need to run the optimization for one turn and could overcome a lot of unnecessary production.</p><h3 id="Sample-data-before-analyze"><a href="#Sample-data-before-analyze" class="headerlink" title="Sample data before analyze"></a>Sample data before analyze</h3><div class="table-container"><table><thead><tr><th>Index</th><th>Val(W)</th><th>Possibility(%)</th><th>Day count</th><th>Expectation</th></tr></thead><tbody><tr><td>0</td><td>65.2</td><td>8</td><td>2</td><td>5.216/130.4</td></tr><tr><td>1</td><td>32.8</td><td>4</td><td>1</td><td>1.312/32.8</td></tr><tr><td>2</td><td>23.3</td><td>4</td><td>1</td><td>0.932/23.3</td></tr><tr><td>…</td><td></td><td></td><td></td></tr></tbody></table></div><p>This data needs to be purified ahead of time, for those cases that produced energy is less than equipment consumption, we could simply set its total to 0.</p><h3 id="Define-variables-1"><a href="#Define-variables-1" class="headerlink" title="Define variables"></a>Define variables</h3><p>J : type of energy, $J\in$ {wind, water, $\cdots$ }</p><p>N : value index, 1, 2, $\cdots$.</p><p>C = $\mathbf{R}^J$: the normal energy consumption per unit time for each producer (Need to consider as a combination of multiple equipments, like: if we have two wind machine(user is able to define this in control), each machine will consume 10 W. Then $C_{wind}$=10*2=20)</p><p>U = $\mathbf{R}$: Total user consumption</p><p>W = $\mathbf{R}^{J,N}$, the expected energy(total in above table) produced in each value index, either pre-calculated or calculate in model.</p><p>S = {0,1}$^{J,N}$, to indicate I should turn on wind on this statistic data or not</p><p>B $\in \mathbf{R}$ : The battery charging limitation.</p><h3 id="Optimization-Model-1"><a href="#Optimization-Model-1" class="headerlink" title="Optimization Model"></a>Optimization Model</h3><script type="math/tex;mode=display">\begin{equation}\begin{split}&\text{Maximize } & \sum_{i\in N}\sum_{j\in J}W_{ij}S_{ij}-\sum_{i\in N}\sum_{j\in J}C_{j}S_{ij}\\& \text{Subject to}\ & 0 \le S_{ij} \le 1 \ \forall i\in N j\in J\\& & \sum_{i\in N}\sum_{j\in J}W_{ij}S_{ij}-\sum_{i\in N}\sum_{j\in J}C_{j}S_{ij}-U\le B\end{split}\end{equation}</script><p>Use MIP to solve it</p><h3 id="Sample-data-1"><a href="#Sample-data-1" class="headerlink" title="Sample data"></a>Sample data</h3><p><a id="2"></a></p><p>Sample data should be in csv format, each column contains different information. Data defined in teh previous section is acceptable but not efficient. Only wind data is represented in the section below.</p><p>If data input is in a range, then we are going to use median of each group. Like this:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eType,Range (mph), Total</span><br><span class="line">1, 1.3 -    4,3.3</span><br><span class="line">1,   4 -    8,23.5</span><br><span class="line">1,   8 -   13,46.4</span><br></pre></td></tr></table></figure><p>Or the specific data and occurrence count in csv file:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eType,val (mph), Total</span><br><span class="line">1, 1.3,3.3</span><br><span class="line">1,   4,23.5</span><br><span class="line">1,   8,46.4</span><br></pre></td></tr></table></figure><p><code>Total</code> could be either the possibility this data occurs or the number of days.</p><p><code>Range</code> or <code>val</code> could be the input energy or data used to calculate. Like we are able to calculate the final energy based on this result in some way, e.g. wind speed.</p><h3 id="Possible-GAMS-code-1"><a href="#Possible-GAMS-code-1" class="headerlink" title="Possible GAMS code"></a>Possible GAMS code</h3><h3 id="Interpret-to-Js-1"><a href="#Interpret-to-Js-1" class="headerlink" title="Interpret to Js"></a>Interpret to Js</h3><h3 id="Analyze-1"><a href="#Analyze-1" class="headerlink" title="Analyze"></a>Analyze</h3><h4 id="Pros-1"><a href="#Pros-1" class="headerlink" title="Pros"></a>Pros</h4><ul><li>Use expectation to simulate a better estimate of wind speed in different scenario</li><li>Save calculation</li></ul><h4 id="Cons-1"><a href="#Cons-1" class="headerlink" title="Cons"></a>Cons</h4><ul><li>Data has higher wind speed would usually has less possibility. Then the model won’t focus on them, so they might be ignored in the model. (Too big wind might harm the equipment, so this make sense sometime)</li><li>User consumption is not perfect estimate</li></ul><h2 id="Modified-Version-for-Normal-Count"><a href="#Modified-Version-for-Normal-Count" class="headerlink" title="Modified Version for Normal Count"></a>Modified Version for Normal Count</h2><p>Battery limitation is a long term limitation, each one has some kind of relationship. Has battery limitation and want to find global optimal.</p><h3 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h3><p>J : type of energy, $J\in$ {wind, water, $\cdots$ }</p><p>N : number of days, $\in $ {1,2,3, $\cdots$ ,n}</p><p>c = $\mathbf{R}^J$: the normal energy consumption per unit time for each producer (Need to consider as a combination of multiple equipments, like: if we have two wind machine(user is able to define this in control), each machine will consume 10 W. Then $C_{wind}$=10*2=20)</p><p>U = $\mathbf{R}^N$: User consumption per unit time N</p><p>S = {0,1}$^{J,N}$, the status code to identify if we need to turn on the machine in this day/unit time.</p><p>C = {0,1,2}$^{J,N}$, the counter to count and analyze the normal energy consumption per day/unit time. 2 stand for the unit time that this machine needs to be turned on(as more energy needs to be consumed in the turning on process). 1 identify as daily normal consumption. 0 identify this machine is turned off.</p><p>W = $\mathbf{R}^{J,N}$, the energy produced per day/unit time for j equipment</p><p>B $\in \mathbf{R}^N$ : The battery charging limitation. With $B_0=0$</p><p>B $\in \mathbf{R}$ : Constant to represent the battery charging limitation.</p><h3 id="Optimization-Model-2"><a href="#Optimization-Model-2" class="headerlink" title="Optimization Model"></a>Optimization Model</h3><script type="math/tex;mode=display">\begin{equation}
\begin{split}
&\text{Maximize } & \sum_{i\in N}\sum_{j\in J}W_{ij}S_{ij}-\sum_{j\in J}c_j\sum_{i\in N}C_{ij}S_{ij}\\
&\text{Subject to } & C_{ij}=S_{ij}-S_{i-1,j}+1 \ \forall i\in \{2,\cdots,n\}\\
& & 0 \le C_{ij} \le 2 \ \forall i\in N j\in J\\
& & 0 \le S_{ij} \le 1 \ \forall i\in N j\in J\\
& & B_i\le B \  \forall i\in \{2,\cdots, n\}\\
& & B_i=B_{i-1}+\sum_{j\in J}W_{ij}S_{ij}-\sum_{j\in J}c_jC_{ij}S_{ij}-U_i
\end{split}
\end{equation}</script><p>Use MIP to solve it</p><h3 id="Sample-data-2"><a href="#Sample-data-2" class="headerlink" title="Sample data"></a>Sample data</h3><p><a id="1"></a></p><p>Sample data should be in csv format, each column contains different information. Only wind data is represented in the section below</p><p>u is the x component of wind/other type of energy, v is the y component of the wind. Final wind speed is calculated by using $ws = \sqrt{u^2+v^2}$ .</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Time,eType,u,v</span><br><span class="line">0.2,1,12,15</span><br><span class="line">0.3,1,16,12</span><br><span class="line">0.5,1,12,16</span><br></pre></td></tr></table></figure><p>If we need to make this simpler or we are not able to collect related data for each type of energy, we could also use data in the below format:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Time,eType,var</span><br><span class="line">0.2,1,12</span><br><span class="line">0.3,1,16</span><br><span class="line">0.5,1,12</span><br></pre></td></tr></table></figure><p><code>eType</code> is the type of energy, 1 means wind, 2 means sun …</p><p><code>var</code> is the input energy or data used to calculate. Like we are able to calculate the final energy based on this result in some way.</p><h2 id="Let-thresholds-high"><a href="#Let-thresholds-high" class="headerlink" title="Let thresholds high"></a>Let thresholds high</h2><p>To overcome the cons that some high energy production case will be ignored in the previous cases, use this model to find it. Instead of previous cases, we want to minimize the $\sum_{i,j}S_{ij}$, to use as many as high production case as we could. So the thresholds could be as high as possible.</p><h3 id="Variables-1"><a href="#Variables-1" class="headerlink" title="Variables"></a>Variables</h3><p>J : type of energy, $J\in$ {wind, water, $\cdots$ }</p><p>N : number of days, $\in $ {1,2,3, $\cdots$ ,n}</p><p>c = $\mathbf{R}^J$: the normal energy consumption per unit time for each producer (Need to consider as a combination of multiple equipments, like: if we have two wind machine(user is able to define this in control), each machine will consume 10 W. Then $C_{wind}$=10*2=20)</p><p>U = $\mathbf{R}^N$: User consumption per unit time N</p><p>S = {0,1}$^{J,N}$, the status code to identify if we need to turn on the machine in this day/unit time.</p><p>C = {0,1,2}$^{J,N}$, the counter to count and analyze the normal energy consumption per day/unit time. 2 stand for the unit time that this machine needs to be turned on(as more energy needs to be consumed in the turning on process). 1 identify as daily normal consumption. 0 identify this machine is turned off.</p><p>W = $\mathbf{R}^{J,N}$, the energy produced per day/unit time for j equipment</p><p>B $\in \mathbf{R}^N$ : The amount of energy battery has. With $B_0=$user defined, could be 70% of the battery size</p><p>B $\in \mathbf{R}$ : Constant to represent the battery charging limitation.</p><h3 id="Optimization-Model-3"><a href="#Optimization-Model-3" class="headerlink" title="Optimization Model"></a>Optimization Model</h3><script type="math/tex;mode=display">\begin{equation}\begin{split}&\text{Minimize } & \sum_{i,j}C_{ij}S_{ij}\\&\text{Subject to } & C_{ij}=S_{ij}-S_{i-1,j}+1 \ \forall i\in \{2,\cdots,n\}\\& & 0 \le C_{ij} \le 2 \ \forall i\in N j\in J\\& & 0 \le S_{ij} \le 1 \ \forall i\in N j\in J\\& & B_i\ge B \  \forall i\in \{2,\cdots, n\}\\& & B_i=B_{i-1}+\sum_{j\in J}W_{ij}S_{ij}-\sum_{j\in J}c_jC_{ij}S_{ij}-U_i\end{split}\end{equation}</script><p>Use MIP to solve it</p><p>We could use default value if no applied answer found</p><h3 id="Sample-data-3"><a href="#Sample-data-3" class="headerlink" title="Sample data"></a>Sample data</h3><p>Data format is the same as format defined in <a href="#1">Modified Version for Normal Count</a>.</p><h3 id="Possible-GAMS-code-2"><a href="#Possible-GAMS-code-2" class="headerlink" title="Possible GAMS code"></a>Possible GAMS code</h3><h3 id="Interpret-to-Js-2"><a href="#Interpret-to-Js-2" class="headerlink" title="Interpret to Js"></a>Interpret to Js</h3><h3 id="Analyze-2"><a href="#Analyze-2" class="headerlink" title="Analyze"></a>Analyze</h3><h4 id="Pros-2"><a href="#Pros-2" class="headerlink" title="Pros"></a>Pros</h4><ul><li>We will use as much as high production scenario as we could</li><li>Because thresholds is high, a lot of unexpected energy consumption in the turning on process could be eliminated.</li></ul><h4 id="Cons-2"><a href="#Cons-2" class="headerlink" title="Cons"></a>Cons</h4><ul><li>Total energy is not maximized(This makes sense, as we only have a limited energy storage)</li></ul><h2 id="Expected-Count-for-Let-thresholds-high-case"><a href="#Expected-Count-for-Let-thresholds-high-case" class="headerlink" title="Expected Count for Let thresholds high case"></a>Expected Count for Let thresholds high case</h2><p>Data source definition is the same as the previous situation</p><h3 id="Define-variables-2"><a href="#Define-variables-2" class="headerlink" title="Define variables"></a>Define variables</h3><p>J : type of energy, $J\in$ {wind, water, $\cdots$ }</p><p>N : value index, 1, 2, $\cdots$.</p><p>C = $\mathbf{R}^J$: the normal energy consumption per unit time for each producer (Need to consider as a combination of multiple equipments, like: if we have two wind machine(user is able to define this in control), each machine will consume 10 W. Then $C_{wind}$=10*2=20)</p><p>U = $\mathbf{R}$: Total user consumption</p><p>W = $\mathbf{R}^{J,N}$, the expected energy(total in above table) produced in each value index, either pre-calculated or calculate in model.</p><p>S = {0,1}$^{J,N}$, to indicate I should turn on wind on this statistic data or not</p><p>B $\in \mathbf{R}$ : The battery charging limitation.</p><p>D $\in \mathbf{R}^{J,N}$, indicate the day count each value index, either pre-calculated or calculate in model.</p><h3 id="Optimization-Model-4"><a href="#Optimization-Model-4" class="headerlink" title="Optimization Model"></a>Optimization Model</h3><script type="math/tex;mode=display">\begin{equation}\begin{split}&\text{Minimize } & \sum_{i\in N}\sum_{j\in J}D_{ij}S_{ij}\\& \text{Subject to}\ & 0 \le S_{ij} \le 1 \ \forall i\in N j\in J\\& & \sum_{i\in N}\sum_{j\in J}W_{ij}S_{ij}-\sum_{i\in N}\sum_{j\in J}C_{j}S_{ij}-U\ge B\end{split}\end{equation}</script><p>Use MIP to solve it</p><h3 id="Sample-data-4"><a href="#Sample-data-4" class="headerlink" title="Sample data"></a>Sample data</h3><p>Data format is the same as format defined in <a href="#2">Expected Count Model</a>.</p><h3 id="Possible-GAMS-code-3"><a href="#Possible-GAMS-code-3" class="headerlink" title="Possible GAMS code"></a>Possible GAMS code</h3><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">$ontext</span></span><br><span class="line"><span class="comment">generating gdx</span></span><br><span class="line"><span class="comment">gdxxrw E:\test\OptimizationData.xlsx par=data rng=OptimizationData!A1:I12 cDim=1 rDim=1 set=row rng=OptimizationData!A1:I1 cDim=1 set=idx rng=OptimizationData!A2:A12 rDim=1</span></span><br><span class="line"><span class="comment">assume 365 hrs in total to make calculation simpler</span></span><br><span class="line"><span class="comment">Need to add user consumption in the future</span></span><br><span class="line"><span class="comment">//permit partially open, for case when half of days needs to be opened.</span></span><br><span class="line"><span class="comment">MIP is reqired, as we are calculating the expectation, I only know this might happen, but I don't know and no need to know the exact day to turn on or off the device.</span></span><br><span class="line"><span class="comment">So, it is saying we need to turn on this device at this energy level or not.</span></span><br><span class="line"><span class="comment">We can not half turn on the device</span></span><br><span class="line"><span class="comment">wind_count could be wind possibility</span></span><br><span class="line"><span class="comment">$offtext</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">sets</span> idx(*), row(*);</span><br><span class="line"><span class="keyword">parameter</span> data(idx, row);</span><br><span class="line"></span><br><span class="line"><span class="meta"><span class="meta-keyword">$gdxin</span> OptimizationData.gdx </span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$load</span> idx row data</span></span><br><span class="line"><span class="meta"><span class="meta-keyword">$gdxin</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">alias</span>(idx,i);</span><br><span class="line"><span class="keyword">Sets</span></span><br><span class="line">       j(row) / wind_value,light_value,wave_value,current_value/ ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">scalar</span> U <span class="comment">"Total user consumption in 365 hrs"</span> /[<span class="number">2139300</span>*<span class="number">365</span>]/</span><br><span class="line">        B <span class="comment">"battery capacity"</span> /<span class="number">1000000000</span>/;</span><br><span class="line"></span><br><span class="line"><span class="keyword">integer</span> <span class="keyword">variable</span> a(i,j);</span><br><span class="line"><span class="keyword">variable</span> k;</span><br><span class="line"><span class="keyword">equations</span> obj, limit, limitvar1, limitvar2;</span><br><span class="line"><span class="function"><span class="title">obj</span></span>..</span><br><span class="line">    k <span class="symbol">=e=</span> <span class="keyword">sum</span>(i,a(i,<span class="string">"wind_value"</span>)*data(i,<span class="string">"wind_count"</span>)+a(i,<span class="string">"light_value"</span>)*data(i,<span class="string">"light_count"</span>)+a(i,<span class="string">"wave_value"</span>)*data(i,<span class="string">"wave_count"</span>)+a(i,<span class="string">"current_value"</span>)*data(i,<span class="string">"current_count"</span>));</span><br><span class="line"><span class="function"><span class="title">limit</span></span>..</span><br><span class="line">    <span class="keyword">sum</span>(i, a(i,<span class="string">"wind_value"</span>)*data(i,<span class="string">"wind_count"</span>)*data(i,<span class="string">"wind_value"</span>)+a(i,<span class="string">"light_value"</span>)*data(i,<span class="string">"light_count"</span>)*data(i,<span class="string">"light_value"</span>)+a(i,<span class="string">"wave_value"</span>)*data(i,<span class="string">"wave_value"</span>)*data(i,<span class="string">"wave_count"</span>)+a(i,<span class="string">"current_value"</span>)*data(i,<span class="string">"current_value"</span>)*data(i,<span class="string">"current_count"</span>)) - U <span class="symbol">=g=</span> B;</span><br><span class="line"><span class="function"><span class="title">limitvar1</span>(<span class="params">i,j</span>)</span>..</span><br><span class="line">    a(i,j) <span class="symbol">=g=</span> <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="title">limitvar2</span>(<span class="params">i,j</span>)</span>..</span><br><span class="line">    a(i,j) <span class="symbol">=l=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">model</span> energy /<span class="keyword">all</span>/;</span><br><span class="line"><span class="keyword">solve</span> energy <span class="keyword">using</span> mip <span class="keyword">minimizing</span> k;</span><br><span class="line"></span><br><span class="line"><span class="keyword">display</span> a.l;</span><br></pre></td></tr></table></figure><h3 id="Analyze-3"><a href="#Analyze-3" class="headerlink" title="Analyze"></a>Analyze</h3><h4 id="Pros-3"><a href="#Pros-3" class="headerlink" title="Pros"></a>Pros</h4><ul><li>Use expectation to simulate a better estimate of wind speed in different scenario</li><li>Save calculation</li></ul><h4 id="Cons-3"><a href="#Cons-3" class="headerlink" title="Cons"></a>Cons</h4><ul><li>User consumption is not perfect estimate</li><li>Energy stored in battery is not perfectly estimated</li></ul><h2 id="Last-thought"><a href="#Last-thought" class="headerlink" title="Last thought:"></a>Last thought:</h2><p>Both model doesn’t consider extreme case, as people will still have control on the entire system and most of people won’t use this in extreme case.</p><p>To make all models become portable and not using too many calculation, I choose LP or MIP model, instead of building some better estimate model.</p><p>Battery has some specific charging and discharging curve, like this: <img src="https://i.stack.imgur.com/eltx3.png" alt></p><h2 id="Need-discussion"><a href="#Need-discussion" class="headerlink" title="Need discussion"></a>Need discussion</h2><ul><li><p>Do we know normal user consumption of energy?</p></li><li><p>If no history data provided, then use fixed threshold=energy consumed by equipment in normal life.</p></li><li><p>Another thought: Use a single line and calculate how many value is below the line, estimate and find the least number of turning on/off (Not possible, as turning off is a point but wind might remain low for a duration of time)</p></li></ul></div><section class="meta" id="footer-meta"><hr><div class="new-meta-box"><div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-05-28T20:55:39-05:00"><a class="notlink"><i class="fas fa-clock" aria-hidden="true"></i><p>last updated at May 28, 2020</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/GAMS/" rel="nofollow"><i class="fas fa-hashtag" aria-hidden="true"></i>&nbsp;<p>GAMS</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/MIP/" rel="nofollow"><i class="fas fa-hashtag" aria-hidden="true"></i>&nbsp;<p>MIP</p></a></div></div></section><div class="prev-next"><section class="prev"><span class="art-item-left"><h6><i class="fas fa-chevron-left" aria-hidden="true"></i>&nbsp;Previous</h6><h4><a href="/2020/Energy-smulation-website/" rel="prev" title="Energy simulation website">Energy simulation website</a></h4><h6 class="tags"><a class="tag" href="/tags/MIP/"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>MIP</a> <a class="tag" href="/tags/jsLpsolver/"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i>jsLpsolver</a></h6></span></section><section class="next"><span class="art-item-right" aria-hidden="true"><h6>Next&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i></h6><h4><a href="/2020/projects/From-swing-awt-to-javafx/" rel="prev" title="From swing,awt to javafx">From swing,awt to javafx</a></h4></span></section></div></section></article><article class="post white-box comments"><section class="article typo"><h4><i class="fas fa-comments fa-fw" aria-hidden="true"></i>&nbsp;Comments</h4><section id="comments"><div id="valine_container" class="valine_thread"><i class="fas fa-spinner fa-spin fa-fw"></i></div></section></section></article><script>window.subData={title:"Optimal Energy Production",tools:!0}</script></div><aside class="l_side"><section class="widget toc-wrapper"><header class="material"><div><i class="fas fa-list fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;TOC</div><div class="wrapper"><a class="s-toc rightBtn" rel="external nofollow noopener noreferrer" href="javascript:void(0)"><i class="fas fa-thumbtack fa-fw"></i></a></div></header><div class="content material"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Normal-Count-Model"><span class="toc-text">Normal Count Model</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Define-variables"><span class="toc-text">Define variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optimization-Model"><span class="toc-text">Optimization Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-data"><span class="toc-text">Sample data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Possible-GAMS-code"><span class="toc-text">Possible GAMS code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interpret-to-Js"><span class="toc-text">Interpret to Js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Analyze"><span class="toc-text">Analyze</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pros"><span class="toc-text">Pros</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cons"><span class="toc-text">Cons</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Expected-Count-Model"><span class="toc-text">Expected Count Model</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-data-before-analyze"><span class="toc-text">Sample data before analyze</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Define-variables-1"><span class="toc-text">Define variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optimization-Model-1"><span class="toc-text">Optimization Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-data-1"><span class="toc-text">Sample data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Possible-GAMS-code-1"><span class="toc-text">Possible GAMS code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interpret-to-Js-1"><span class="toc-text">Interpret to Js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Analyze-1"><span class="toc-text">Analyze</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pros-1"><span class="toc-text">Pros</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cons-1"><span class="toc-text">Cons</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Modified-Version-for-Normal-Count"><span class="toc-text">Modified Version for Normal Count</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Variables"><span class="toc-text">Variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optimization-Model-2"><span class="toc-text">Optimization Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-data-2"><span class="toc-text">Sample data</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Let-thresholds-high"><span class="toc-text">Let thresholds high</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Variables-1"><span class="toc-text">Variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optimization-Model-3"><span class="toc-text">Optimization Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-data-3"><span class="toc-text">Sample data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Possible-GAMS-code-2"><span class="toc-text">Possible GAMS code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Interpret-to-Js-2"><span class="toc-text">Interpret to Js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Analyze-2"><span class="toc-text">Analyze</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pros-2"><span class="toc-text">Pros</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cons-2"><span class="toc-text">Cons</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Expected-Count-for-Let-thresholds-high-case"><span class="toc-text">Expected Count for Let thresholds high case</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Define-variables-2"><span class="toc-text">Define variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optimization-Model-4"><span class="toc-text">Optimization Model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sample-data-4"><span class="toc-text">Sample data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Possible-GAMS-code-3"><span class="toc-text">Possible GAMS code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Analyze-3"><span class="toc-text">Analyze</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Pros-3"><span class="toc-text">Pros</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cons-3"><span class="toc-text">Cons</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Last-thought"><span class="toc-text">Last thought:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Need-discussion"><span class="toc-text">Need discussion</span></a></li></ol></div></section><section class="widget category"><header class="material"><div><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;Categories</div><a class="rightBtn" rel="nofollow" href="/categories/" title="categories/"><i class="fas fa-expand-arrows-alt fa-fw"></i></a></header><div class="content material"><ul class="entry"><li><a class="flat-box" title="/categories/Cryptocurrency-Application/" href="/categories/Cryptocurrency-Application/"><div class="name">Cryptocurrency Application</div><div class="badge">(4)</div></a></li><li><a class="flat-box child" title="/categories/Cryptocurrency-Application/Bitcoin/" href="/categories/Cryptocurrency-Application/Bitcoin/"><div class="name">Bitcoin</div><div class="badge">(1)</div></a></li><li><a class="flat-box child" title="/categories/Cryptocurrency-Application/EOSIO/" href="/categories/Cryptocurrency-Application/EOSIO/"><div class="name">EOSIO</div><div class="badge">(3)</div></a></li><li><a class="flat-box" title="/categories/Expo/" href="/categories/Expo/"><div class="name">Expo</div><div class="badge">(3)</div></a></li><li><a class="flat-box" title="/categories/Programs/" href="/categories/Programs/"><div class="name">Programs</div><div class="badge">(3)</div></a></li><li><a class="flat-box child" title="/categories/Programs/Coursework/" href="/categories/Programs/Coursework/"><div class="name">Coursework</div><div class="badge">(1)</div></a></li><li><a class="flat-box child" title="/categories/Programs/tools/" href="/categories/Programs/tools/"><div class="name">tools</div><div class="badge">(2)</div></a></li><li><a class="flat-box" title="/categories/optimization/" href="/categories/optimization/"><div class="name">optimization</div><div class="badge">(4)</div></a></li><li><a class="flat-box" title="/categories/website-Hexo/" href="/categories/website-Hexo/"><div class="name">website - Hexo</div><div class="badge">(1)</div></a></li><li><a class="flat-box" title="/categories/website/" href="/categories/website/"><div class="name">website</div><div class="badge">(6)</div></a></li><li><a class="flat-box child" title="/categories/website/Hexo/" href="/categories/website/Hexo/"><div class="name">Hexo</div><div class="badge">(1)</div></a></li><li><a class="flat-box child" title="/categories/website/JS/" href="/categories/website/JS/"><div class="name">JS</div><div class="badge">(1)</div></a></li></ul></div></section><section class="widget tagcloud"><header class="material"><div><i class="fas fa-fire fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;Hot Tags</div><a class="rightBtn" rel="nofollow" href="/tags/" title="tags/"><i class="fas fa-expand-arrows-alt fa-fw"></i></a></header><div class="content material"><a href="/tags/Bitcoin/" style="font-size:14px;color:#999">Bitcoin</a> <a href="/tags/CPLEX/" style="font-size:14px;color:#999">CPLEX</a> <a href="/tags/GAMS/" style="font-size:17.33px;color:#828282">GAMS</a> <a href="/tags/HTML/" style="font-size:14px;color:#999">HTML</a> <a href="/tags/JS/" style="font-size:14px;color:#999">JS</a> <a href="/tags/Java/" style="font-size:17.33px;color:#828282">Java</a> <a href="/tags/JavaFX/" style="font-size:14px;color:#999">JavaFX</a> <a href="/tags/MIP/" style="font-size:24px;color:#555">MIP</a> <a href="/tags/Notes/" style="font-size:14px;color:#999">Notes</a> <a href="/tags/SQL/" style="font-size:17.33px;color:#828282">SQL</a> <a href="/tags/Website/" style="font-size:17.33px;color:#828282">Website</a> <a href="/tags/eos/" style="font-size:20.67px;color:#6c6c6c">eos</a> <a href="/tags/eos-cdt/" style="font-size:20.67px;color:#6c6c6c">eos.cdt</a> <a href="/tags/eosio-contracts/" style="font-size:20.67px;color:#6c6c6c">eosio.contracts</a> <a href="/tags/jsLpsolver/" style="font-size:14px;color:#999">jsLpsolver</a></div></section><section class="widget related_posts"><header class="material"><div><i class="fas fa-bookmark fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;Related Posts</div></header><div class="content material"><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/2019/projects/College-library-optimization-problem/" title="College library optimization problem" rel="bookmark">College library optimization problem</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/2020/Energy-smulation-website/" title="Energy simulation website" rel="bookmark">Energy simulation website</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-title"><h3><a href="/2020/projects/Energy-simulation-JavaFx-ver/" title="Energy simulation JavaFx ver." rel="bookmark">Energy simulation JavaFx ver.</a></h3></div></li></ul></div></section></aside><footer id="footer" class="clearfix"><div class="footer"></div><br><div class="social-wrapper"><a href="mailto:huangsk100@gmail.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://github.com/ShaokangJiang" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://github.com/sjiang97" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a></div><br><div><p>Powered by <a href="https://hexo.io/">Hexo</a>. Use <a href="https://xaoxuu.com/wiki/material-x/">Material-X</a> as theme.</p></div></footer><script>setLoadingBarProgress(80)</script><script>setLoadingBarProgress(60)</script></div><a class="s-top fas fa-arrow-up fa-fw" href="javascript:void(0)"></a></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script>var GOOGLE_CUSTOM_SEARCH_API_KEY="",GOOGLE_CUSTOM_SEARCH_ENGINE_ID="",ALGOLIA_API_KEY="",ALGOLIA_APP_ID="",ALGOLIA_INDEX_NAME="",AZURE_SERVICE_NAME="",AZURE_INDEX_NAME="",AZURE_QUERY_KEY="",BAIDU_API_ID="",SEARCH_SERVICE="hexo",ROOT="/";ROOT.endsWith("/")||(ROOT+="/")</script><script src="//instant.page/1.2.2" type="module" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script><script async src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script><script type="text/javascript">$((function(){0!==$(".reveal").length&&ScrollReveal({distance:0}).reveal(".reveal")}))</script><script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script><script type="text/javascript">$((function(){Waves.attach(".flat-btn",["waves-button"]),Waves.attach(".float-btn",["waves-button","waves-float"]),Waves.attach(".float-btn-light",["waves-button","waves-float","waves-light"]),Waves.attach(".flat-box",["waves-block"]),Waves.attach(".float-box",["waves-block","waves-float"]),Waves.attach(".waves-image"),Waves.init()}))</script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script><script type="text/javascript">$((function(){$(".cover").backstretch(["https://img.vim-cn.com/6d/a0c9e6f9efad8b731cb7376504bd10d79d2053.jpg"],{duration:"6000",fade:"2500"})}))</script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-valine@1.3.4/js/valine.min.js"></script><script>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter((function(i){return GUEST_INFO.indexOf(i)>-1})),notify=!1,verify=!1,valine=new Valine;valine.init({el:"#valine_container",notify:notify,verify:verify,guest_info:guest_info,appId:"g0v2qyGEhGys4wGpCLsKkerW-gzGzoHsz",appKey:"Sceumpu0A14EiY5RR3HtsCFx",placeholder:"",pageSize:"10",avatar:"mp",lang:"en",highlight:"false"})</script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.4.19/js/app.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-material-x@19.4.19/js/search.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script><script>let COPY_SUCCESS="Copied",COPY_FAILURE="Copy failed";window,document,function(){$(".highlight .code pre").before('<button class="btn-copy" data-clipboard-snippet="">  <i class="fa fa-copy"></i><span>Copy</span></button>');var o=new ClipboardJS(".btn-copy",{target:function(o){return o.nextElementSibling}});o.on("success",(function(o){console.info("Action:",o.action),console.info("Text:",o.text),console.info("Trigger:",o.trigger),success_prompt(COPY_SUCCESS),o.clearSelection()})),o.on("error",(function(o){console.error("Action:",o.action),console.error("Trigger:",o.trigger),fail_prompt(COPY_FAILURE)}))}();var prompt=function(o,n,t){n=void 0===n?"alert-success":n,t=void 0===t?1500:1e3*t,$("<div>").appendTo("body").addClass("alert "+n).html(o).show().delay(t).fadeOut()},success_prompt=function(o,n){prompt(o,"alert-success",n)},fail_prompt=function(o,n){prompt(o,"alert-danger",n)},warning_prompt=function(o,n){prompt(o,"alert-warning",n)},info_prompt=function(o,n){prompt(o,"alert-info",n)}</script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script>let LAZY_LOAD_IMAGE="";$(".article-entry").find("fancybox").find("img").each((function(){var t=document.createElement("a");$(t).attr("data-fancybox","gallery"),$(t).attr("href",$(this).attr("src")),LAZY_LOAD_IMAGE&&$(t).attr("href",$(this).attr("data-original")),$(this).wrap(t)}))</script><script>setLoadingBarProgress(100)</script></body></html>